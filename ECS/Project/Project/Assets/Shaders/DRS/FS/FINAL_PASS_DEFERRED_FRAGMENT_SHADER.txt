#version 430 core

in vec4 texture_coordinates;
uniform sampler2D texture_sampler;

out vec4 color;

float near = 0.1; 
float far  = 500.0; 
  
float LinearizeDepth(float depth) 
{
    float z = depth * 2.0 - 1.0; // Back to NDC 
    return (2.0 * near * far) / (far + near - z * (far - near));	
}


void main()
{
	vec4 finalColor = texture2D(texture_sampler, vec2(texture_coordinates.x, texture_coordinates.y));
	float depth = LinearizeDepth(finalColor.z) / far; // divide by far for demonstration
	color = vec4(finalColor.xyz, 1.0);
}